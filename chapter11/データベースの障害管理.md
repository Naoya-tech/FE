データベースには業務に必要な大量のデータが入っており、刻々と更新されていく。

よって、定期的に**バックアップファイル**を作ったり、更新前後の状態を**ジャーナルファイル**に記録する事で、障害の発生に備える。


## コミットとロールバック

データベースはトランザクション単位で懇親処理を管理する。
トランザクションは一連の処理が問題なく完了できたとき、はじめてデータベースに更新内容が反映される。  
これを**コミット**という。

もしトランザクション中になんらかの障害が起こった場合、トランザクション処理を始める前の状態に戻さないといけない。

そこで、データベース更新前の状態を更新前ジャーナルから取得して、データベースをトランザクション開始前の状態にまで戻す。  
この処理を**ロールバック**という。


## 分散データベースと2相コミット

物理的に分かれている複数のデータベースを見かけ上ひとつのデータベースとして扱えるようにしたシステムを**分散データベースシステム**という。

このような分散データベースではトランザクション処理が各所で行われるため、全体の同期をとって、コミットやロールバックを行わないと、一部だけが更新されたりして、データの整合性がとれなくなってしまう。

そこで、全サイトにコミットができるかの問い合わせを行い、全部がオッケーならコミット、ひとつでも不可ならロールバック  
という、方式を採用しており、これを**2相コミット**と呼ぶ。

## データベースを復旧させるロールフォワード

トランザクションの処理中ではなく、ディスク障害などで、突然データベースが故障してしまった際、定期的に保存しているバックアップファイルからデータを復元しないといけない。

しかし、これだとバックアップをとってからの更新が反映されないので、故障する直前までの**更新後ジャーナルファイル**を取得することで、障害発生直前まで復旧することができる。  
この一連の処理を**ロールフォワード**という。