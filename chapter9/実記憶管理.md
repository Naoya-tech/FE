プログラム内蔵方式をとる現在のコンピュータでは主記憶装置にデータをロードしてから実行が行われる。  
マルチプログラミング環境では複数、主記憶装置にロードをする必要がある。  
つまり、ロードされるプログラムをうまく主記憶装置に置かないと主記憶装置の容量をうまく活用しきれない。

## 固定区画方式

固定区画方式は、主記憶に固定長の区画(**パーティション**)を設けてそこにプログラムを読み込む管理方式。  
全体を単一の区画とする**単一区画方式**と複数の区画に分ける**多重区画方式**がある。


![](/image/9-4-1.jpg)

単純なしくみなので記憶管理はかんたんにできるが、余りスペースの活用ができないので、主記憶の利用効率は良くない。


## 可変区画方式

固定長で区切ってしまうのではなくプログラムをロードするタイミングで必要なサイズに区切る管理方法が**可変区画方式**。

余りスペースが発生しないので一見パーフェクトに見えるが、新たな問題が発生する。

### フラグメンテーションとメモリコンパクション

可変区画方式だと隙間なくプログラムを詰め込んで実行することが可能になるが、必ずしも詰め込んだ順番にプログラムが実行される訳ではないので、空き容量ができても、連続した空きではなく断片化した空き状態になってしまう(**フラグメンテーション**)。  
これを解消するためには、ロードされたプログラムを再配置する必要があり、この操作を  
**メモリコンパクション**、**ガーベジコレクション**という。


## オーバーレイ方式

主記憶の容量を超えるプログラムをロードする工夫が**オーバーレイ方式**

この方式ではプログラムをセグメントという単位に分割しておいて、そのときに必要なセグメントだけを主記憶にロードして実行する。

![](/image/9-4-2.jpg)


## スワッピング方式

マルチプログラミング環境では、優先度の高いプログラムによる割り込みが発生した場合、実行中のプログラムを一旦中断させて、切り替えを行うが、  
実行可能状態や待機状態のプログラムが主記憶に溜まると、肝心の優先度の高いプログラムがロードできない…という問題が発生する。

そこで優先度の低いプログラムを補助記憶装置に一旦退避させることで空き容量を作る。(**スワップアウト**)

退避させたプログラムに再びCPU使用権が与えられる際は、補助記憶から主記憶にロードし直して、中断箇所から処理を再開する。(**スワップイン**)

このような処理を**スワッピング**という。
スワッピングがおこると、処理速度が極端に落ちる。
