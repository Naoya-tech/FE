仮想記憶は、主記憶や補助記憶の存在を隠蔽することで、広大なメモリ空間を自由に扱えるようにするもの。

## なぜ仮想記憶が自由なのか

実記憶の場合だと、連続したスペースを空ける必要があるが(そのためにメモリコンパクションなどを行う)、その前段階で広大な仮想記憶のアドレス空間を用意することで、どこにプログラムをおいても問題なくなる。  
そして**動的アドレス変換機構**というハードウェアを用いることで、仮想記憶から実記憶の配置を行ってやる。

これだと、実記憶の容量を超える仮想記憶は用意できないようにみえるが、補助記憶にもアドレスを配置することで、仮想記憶のアドレス空間は大きくなる。

イメージ
![](/image/9-6-1.jpg)

## ページング方式

仮想記憶の実装方式には仮想アドレス空間を固定長の領域に区切って管理するページング方式と、  
可変長の領域に区切って管理するセグメント方式がある。


ページング方式では、プログラムを「ページ」という単位に分割して管理する。(一般的に1ページ、4キロバイト)  
ただプログラムには色んな機能があるので、いつもすべてのページが必要になるわけではない。  
そこで「実行に必要なページだけを実記憶に読み込ませる」方法が主流。  
実行に必要なページだけが実記憶に読み込まれそれ以外のページは補助記憶にいく。  

そして、必要になったときに補助記憶から実記憶から読み込みが行われこれを**ページイン**、  
実記憶がいっぱいでいずれかのページを補助記憶に追い出しが行われこれを**ページアウト**という。

実記憶の容量が少ないと、補助記憶と実記憶間でページの置き換えを頻繁に行う必要があり、システムの処理効率が極端に下がってしまう。これを**スラッシング**という。


## ページの置き換えアルゴリズム

### FIFO(First In First Out)方式
最初にページインしたページを追い出し対象にする方式

### LIFO(Last In First Out)方式
最後にページインしたページを追い出し対象にする方式

### LRU(Least Recently Used)方式
最も長い間、参照されていないページが追い出し対象になる方式

### LFU(Least Frequently Used)方式
最も参照回数が少ないページを追い出し対象にする方式


## ページングとスワッピング

広義には同じ使われ方をするがFEでは狭義のスワッピングの解釈をするので違いを覚えておく必要がある。

### ページング
**ページ単位**での領域の出し入れ

### スワッピング
**プロセス(プログラム)単位**での領域の出し入れ