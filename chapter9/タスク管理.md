タスクとは  
コンピュータが「実行中のプログラムです」と識別する仕事の単位。**プロセス**ともいう。


## タスクの状態遷移

生成されたタスクには3つの状態がある。

- 実行可能状態(READY)
- 実行状態(RUN)
- 待機状態(WAIT)


生成されたタスクは即座に実行されるわけではなく、プログラムを処理するにはCPU使用権が必要。  
このCPU使用権を効率よく回すために3つの状態をいったりきたりしている。

![](/image/9-3-1.jpg)

## ディスパッチャとタスクスケジューリング

実行可能状態(READY)のタスクにCPU使用権を割り当てるのは**ディスパッチャ**という管理プログラムの役割。  

このとき、「どのタスクにCPU使用権を割り当てるか」を決めるには、タスクの実行順序を定める必要がある。  
**タスクスケジューリング**とはこの「タスクの実行順序」のことで、代表的な3つの方式がある。

- 到着順方式
- 優先順方式
- ラウンドロビン方式


### 到着順方式
名前のとおり、到着した順にCPU使用権が割り当てられる方式。  
実行の途中でCPU使用権が奪われることはない。  
これを**ノンプリエンプション**という。

### 優先順方式
タスクに優先度を設定して、それに従ってCPU使用権を割り振っていく方式。  
CPU使用権が奪われたタスクは実行可能状態の最後尾に移動する。
途中でCPU使用権が奪われることもある。(**プリエンプション**)

### ラウンドロビン方式
一定時間ごとにCPU使用権を切り替える方式。

## 割り込み処理

割り込み処理は実行中のプログラムが原因で生じる内部割込みと、プログラム外の要因で生じる外部割り込みに分けられる。

- 内部割込み
  - プログラム割り込み  
    ゼロ除算やオーバーフロー、存在しないページへのアクセスで生じる割り込み処理
  - SVC割り込み  
    入出力処理を要求するなど、カーネル呼び出し命令が発行されたときの割り込み

- 外部割り込み
  - 入出力割り込み  
    入出力装置の動作完了時や、中断時に生じる割り込み。
  - 機械チェック割り込み  
    ハードウェアの異常で生じる割り込み。
  - コンソール割り込み  
    オペレータ(利用者)の介入が行われたときの割り込み。
  - タイマ割り込み  
    規定時間を過ぎたときに生じる割り込み。